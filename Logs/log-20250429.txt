2025-04-29 09:30:40.681 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 09:30:40.982 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 09:30:53.932 +03:00 [INF] Giriş denemesi: admin
2025-04-29 09:30:54.027 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 09:30:54.027 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 09:30:54.027 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 09:30:54.027 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 09:31:00.325 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.Guid' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method1653(Closure, DbDataReader, Int32[])
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadObject(DbDataReader reader, Int32 ordinal, ReaderColumn column)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadRow()
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.InitializeAsync(DbDataReader reader, IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.Guid' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method1653(Closure, DbDataReader, Int32[])
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadObject(DbDataReader reader, Int32 ordinal, ReaderColumn column)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadRow()
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.InitializeAsync(DbDataReader reader, IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-29 09:31:00.327 +03:00 [ERR] Hata: 00-d5cee1f38deb9e4c168c9426df656fde-7fbbb0f332bdf6ef-00, Kullanıcı: admin, Path: /SistemLog, Method: GET, QueryString: , IP: ::1, UserAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
System.InvalidCastException: Unable to cast object of type 'System.Guid' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method1653(Closure, DbDataReader, Int32[])
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadObject(DbDataReader reader, Int32 ordinal, ReaderColumn column)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadRow()
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.InitializeAsync(DbDataReader reader, IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.SistemLogController.Index(String searchString, String islemTuru, Nullable`1 baslangicTarihi, Nullable`1 bitisTarihi, Int32 page, Int32 pageSize) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/SistemLogController.cs:line 95
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at MuhasebeStokWebApp.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/muhammetkocaman/MuhasebeStokWebApp/Middleware/GlobalExceptionHandlingMiddleware.cs:line 31
2025-04-29 09:32:58.309 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 09:32:58.608 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 09:33:03.874 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.Guid' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method1122(Closure, DbDataReader, Int32[])
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadObject(DbDataReader reader, Int32 ordinal, ReaderColumn column)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadRow()
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.InitializeAsync(DbDataReader reader, IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.Guid' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method1122(Closure, DbDataReader, Int32[])
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadObject(DbDataReader reader, Int32 ordinal, ReaderColumn column)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadRow()
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.InitializeAsync(DbDataReader reader, IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-29 09:33:03.877 +03:00 [ERR] Hata: 00-3aed89e420b8b231401c952a29ce212f-11e698019b2230f9-00, Kullanıcı: admin, Path: /SistemLog, Method: GET, QueryString: , IP: ::1, UserAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
System.InvalidCastException: Unable to cast object of type 'System.Guid' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method1122(Closure, DbDataReader, Int32[])
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadObject(DbDataReader reader, Int32 ordinal, ReaderColumn column)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.ReadRow()
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.BufferedDataRecord.InitializeAsync(DbDataReader reader, IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.BufferedDataReader.InitializeAsync(IReadOnlyList`1 columns, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.SistemLogController.Index(String searchString, String islemTuru, Nullable`1 baslangicTarihi, Nullable`1 bitisTarihi, Int32 page, Int32 pageSize) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/SistemLogController.cs:line 95
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at MuhasebeStokWebApp.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/muhammetkocaman/MuhasebeStokWebApp/Middleware/GlobalExceptionHandlingMiddleware.cs:line 31
2025-04-29 09:45:36.693 +03:00 [ERR] Failed executing DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='120']
DROP INDEX [IX_SistemLoglar_KullaniciId] ON [SistemLoglar];
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SistemLoglar]') AND [c].[name] = N'KullaniciId');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [SistemLoglar] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [SistemLoglar] ALTER COLUMN [KullaniciId] nvarchar(450) NULL;
CREATE INDEX [IX_SistemLoglar_KullaniciId] ON [SistemLoglar] ([KullaniciId]);
2025-04-29 09:46:12.909 +03:00 [ERR] Failed executing DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='120']
DROP INDEX [IX_SistemLoglar_KullaniciId] ON [SistemLoglar];
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SistemLoglar]') AND [c].[name] = N'KullaniciId');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [SistemLoglar] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [SistemLoglar] ALTER COLUMN [KullaniciId] nvarchar(450) NULL;
CREATE INDEX [IX_SistemLoglar_KullaniciId] ON [SistemLoglar] ([KullaniciId]);
2025-04-29 09:46:58.822 +03:00 [ERR] Failed executing DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='120']
DROP INDEX [IX_SistemLoglar_KullaniciId] ON [SistemLoglar];
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[SistemLoglar]') AND [c].[name] = N'KullaniciId');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [SistemLoglar] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [SistemLoglar] ALTER COLUMN [KullaniciId] nvarchar(450) NULL;
CREATE INDEX [IX_SistemLoglar_KullaniciId] ON [SistemLoglar] ([KullaniciId]);
2025-04-29 09:52:51.891 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 09:52:52.186 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 09:54:13.314 +03:00 [INF] Giriş denemesi: admin
2025-04-29 09:54:13.408 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 09:54:13.408 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 09:54:13.408 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 09:54:13.408 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 10:08:30.284 +03:00 [INF] Giriş denemesi: admin
2025-04-29 10:08:30.348 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 10:08:30.349 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 10:08:30.349 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 10:08:30.349 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 10:08:50.356 +03:00 [INF] Birim sayısı: Aktif=1, Pasif=2, Silinmiş=3
2025-04-29 10:08:53.274 +03:00 [INF] Birim sayısı: Aktif=1, Pasif=2, Silinmiş=3
2025-04-29 10:08:57.358 +03:00 [INF] Birim sayısı: Aktif=2, Pasif=2, Silinmiş=2
2025-04-29 10:09:06.722 +03:00 [INF] Birim sayısı: Aktif=2, Pasif=2, Silinmiş=2
2025-04-29 10:09:12.023 +03:00 [INF] Birim sayısı: Aktif=1, Pasif=2, Silinmiş=3
2025-04-29 10:09:20.815 +03:00 [INF] Birim sayısı: Aktif=1, Pasif=2, Silinmiş=3
2025-04-29 10:09:28.618 +03:00 [INF] Birim sayısı: Aktif=1, Pasif=2, Silinmiş=3
2025-04-29 10:09:41.576 +03:00 [INF] Aktif session bulundu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 10:09:41.578 +03:00 [INF] Admin kullanıcısı tespit edildi
2025-04-29 10:09:41.578 +03:00 [INF] Kimlik doğrulanmış kullanıcı: admin
2025-04-29 10:19:54.166 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 10:19:54.181 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 10:19:54.193 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 10:19:54.222 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 10:19:54.223 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 10:19:54.233 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 10:19:54.407 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 10:19:54.421 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 10:20:13.176 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 10:20:13.194 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 11:04:57.372 +03:00 [ERR] Veritabanı oluşturulurken veya migrationlar uygulanırken bir hata oluştu.
System.InvalidOperationException: The relationship from 'SistemLog.Kullanici' to 'ApplicationUser.SistemLoglar' with foreign key properties {'KullaniciId' : Guid?} cannot target the primary key {'Id' : string} because it is not compatible. Configure a principal key or a set of foreign key properties with compatible types for this relationship.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidateNoShadowKeys(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.SqlServer.Infrastructure.Internal.SqlServerModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.InfrastructureExtensions.GetService(IInfrastructure`1 accessor, Type serviceType)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.InfrastructureExtensions.GetService[TService](IInfrastructure`1 accessor)
   at Microsoft.EntityFrameworkCore.Infrastructure.AccessorExtensions.GetService[TService](IInfrastructure`1 accessor)
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.get_Dependencies()
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.CanConnect()
   at Program.<Main>$(String[] args) in /Users/muhammetkocaman/MuhasebeStokWebApp/Program.cs:line 288
2025-04-29 11:05:08.666 +03:00 [INF] Giriş denemesi: admin
2025-04-29 11:05:08.793 +03:00 [ERR] Giriş sırasında hata oluştu
System.InvalidOperationException: The relationship from 'SistemLog.Kullanici' to 'ApplicationUser.SistemLoglar' with foreign key properties {'KullaniciId' : Guid?} cannot target the primary key {'Id' : string} because it is not compatible. Configure a principal key or a set of foreign key properties with compatible types for this relationship.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidateNoShadowKeys(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.SqlServer.Infrastructure.Internal.SqlServerModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Set[TEntity]()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.get_UsersSet()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.get_Users()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByNameAsync(String normalizedUserName, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Microsoft.AspNetCore.Identity.SignInManager`1.PasswordSignInAsync(String userName, String password, Boolean isPersistent, Boolean lockoutOnFailure)
   at MuhasebeStokWebApp.Controllers.AccountController.Login(String username, String password, String rememberMe, String returnUrl) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/AccountController.cs:line 88
2025-04-29 11:16:30.086 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 11:16:30.421 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 11:16:41.436 +03:00 [INF] Giriş denemesi: admin
2025-04-29 11:16:41.537 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 11:16:41.537 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 11:16:41.537 +03:00 [INF] Yönlendirme adresi: /
2025-04-29 11:16:41.537 +03:00 [INF] Admin kullanıcısı / adresine yönlendiriliyor
2025-04-29 11:16:41.647 +03:00 [INF] Aktif session bulundu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 11:16:41.648 +03:00 [INF] Admin kullanıcısı tespit edildi
2025-04-29 11:16:41.648 +03:00 [INF] Kimlik doğrulanmış kullanıcı: admin
2025-04-29 11:16:55.844 +03:00 [INF] Aktif session bulundu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 11:16:55.844 +03:00 [INF] Admin kullanıcısı tespit edildi
2025-04-29 11:16:55.844 +03:00 [INF] Kimlik doğrulanmış kullanıcı: admin
2025-04-29 11:16:55.853 +03:00 [INF] Kur değeri önbellekten alındı: TRY -> USD
2025-04-29 11:16:55.854 +03:00 [INF] Kur değeri önbellekten alındı: UZS -> USD
2025-04-29 11:20:28.165 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 11:20:28.176 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 11:20:28.187 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 11:20:28.203 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 11:20:28.204 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 11:20:28.213 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 11:20:28.386 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 11:21:17.572 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 11:21:28.382 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 11:21:28.382 +03:00 [INF] Step 2 - ModelState kontrol ediliyor
2025-04-29 11:21:28.401 +03:00 [INF] Step 3 - Transaction başlatılıyor (Read Committed)
2025-04-29 11:21:28.401 +03:00 [INF] Step 4 - Fatura nesnesi oluşturuluyor
2025-04-29 11:21:28.436 +03:00 [INF] Fatura oluşturuldu: ID=c4469346-6c13-4033-9af1-e056900f2a0b, FaturaNo=FTR-250429-001
2025-04-29 11:21:28.437 +03:00 [INF] Step 5 - Fatura kalemleri işleniyor
2025-04-29 11:21:28.437 +03:00 [INF] Fatura kalemleri işleniyor. Toplam 1 adet kalem var.
2025-04-29 11:21:28.448 +03:00 [INF] Döviz değerleri hesaplandı: UZS -> USD, BirimFiyat: 25 -> 0,0019384070838947315622924525
2025-04-29 11:21:28.449 +03:00 [INF] Fatura detayı oluşturuldu: ID=3e4b71c0-096b-4379-8ece-4810b4916ef7, Ürün=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Miktar=10
2025-04-29 11:21:28.450 +03:00 [INF] Stok hareketi oluşturuldu: ID=6b73c02e-99e7-4f3f-ba21-ef4ccc027575, Tür=Giriş, Miktar=10
2025-04-29 11:21:28.451 +03:00 [INF] Step 6 - Veritabanı işlemleri başlatılıyor
2025-04-29 11:21:28.502 +03:00 [INF] Ürün stok miktarı güncellendi: UrunID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Eski=0, Yeni=10
2025-04-29 11:21:28.561 +03:00 [INF] Step 7 - Ana kayıtlar veritabanına eklendi
2025-04-29 11:21:28.561 +03:00 [INF] Step 8 - FIFO işlemleri başlatılıyor
2025-04-29 11:21:28.563 +03:00 [INF] StokFifoService.StokGirisiYap başladı: UrunID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Miktar=10, BirimFiyat=25, ParaBirimi=UZS
2025-04-29 11:21:28.564 +03:00 [INF] Parametreler normalize edildi: Birim=Adet, ReferansNo=FTR-250429-001, ParaBirimi=UZS, DovizKuru=13000
2025-04-29 11:21:28.564 +03:00 [INF] FIFO nesnesi oluşturuldu: StokFifoID=75e104df-0e39-4bb5-8972-cbc0799f0cde
2025-04-29 11:21:28.564 +03:00 [INF] Kur değeri önbellekten alındı: UZS -> USD
2025-04-29 11:21:28.564 +03:00 [INF] UZS -> USD birim fiyat hesaplandı: 25 / 0,0000775362833557892624916981 = 322429,69249999999999999997181 USD
2025-04-29 11:21:28.564 +03:00 [INF] UZS birim fiyat direkt atandı (para birimi zaten UZS): 25 UZS
2025-04-29 11:21:28.586 +03:00 [INF] UZS -> TRY birim fiyat hesaplandı: 25 * 0,0029745942210331636873052567 = 0,0743648555258290921826314175 TRY
2025-04-29 11:21:28.621 +03:00 [INF] StokFifo kaydı başarıyla oluşturuldu: ID=75e104df-0e39-4bb5-8972-cbc0799f0cde, Ürün=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Miktar=10
2025-04-29 11:21:28.621 +03:00 [INF] FIFO giriş kaydı başarıyla oluşturuldu: UrunID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Miktar=10
2025-04-29 11:21:28.622 +03:00 [INF] Step 9 - Cari hareket kaydı oluşturuluyor
2025-04-29 11:21:28.632 +03:00 [INF] Cari hareket kaydı oluşturuldu: ID=a9b24bc7-c36e-498f-b9e8-a2d77bbf3494, CariID=d050f27a-3ece-4bad-9c7a-d0a4d3e6b936
2025-04-29 11:21:28.640 +03:00 [INF] Step 11 - Transaction commit edildi, fatura kaydı tamamlandı
2025-04-29 11:21:44.415 +03:00 [ERR] Hata: 00-638542ff3426e413e716d700383a5bf0-059c8a092093f9dc-00, Kullanıcı: admin, Path: /Fatura/Edit/c4469346-6c13-4033-9af1-e056900f2a0b, Method: GET, QueryString: , IP: ::1, UserAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCoreGeneratedDocument.Views_Fatura_Edit.<ExecuteAsync>b__41_1() in /Users/muhammetkocaman/MuhasebeStokWebApp/Views/Fatura/Edit.cshtml:line 206
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCoreGeneratedDocument.Views_Fatura_Edit.ExecuteAsync() in /Users/muhammetkocaman/MuhasebeStokWebApp/Views/Fatura/Edit.cshtml:line 5
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at MuhasebeStokWebApp.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/muhammetkocaman/MuhasebeStokWebApp/Middleware/GlobalExceptionHandlingMiddleware.cs:line 31
2025-04-29 11:24:22.084 +03:00 [ERR] Hata: 00-dbc36194400a5854a06736456463ea6a-225a739aaaa551f7-00, Kullanıcı: admin, Path: /Fatura/Edit/c4469346-6c13-4033-9af1-e056900f2a0b, Method: GET, QueryString: , IP: ::1, UserAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCoreGeneratedDocument.Views_Fatura_Edit.<ExecuteAsync>b__41_1() in /Users/muhammetkocaman/MuhasebeStokWebApp/Views/Fatura/Edit.cshtml:line 206
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCoreGeneratedDocument.Views_Fatura_Edit.ExecuteAsync() in /Users/muhammetkocaman/MuhasebeStokWebApp/Views/Fatura/Edit.cshtml:line 5
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at MuhasebeStokWebApp.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/muhammetkocaman/MuhasebeStokWebApp/Middleware/GlobalExceptionHandlingMiddleware.cs:line 31
2025-04-29 11:28:47.151 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 11:28:47.472 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 11:48:39.462 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 11:48:39.764 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 11:48:56.592 +03:00 [INF] Giriş denemesi: admin
2025-04-29 11:48:56.720 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 11:48:56.720 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 11:48:56.720 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 11:48:56.720 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 11:50:12.191 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 11:50:12.202 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 11:50:12.212 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 11:50:12.222 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 11:50:12.224 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 11:50:12.241 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 11:50:12.403 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 11:50:43.758 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 11:50:59.890 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 11:50:59.890 +03:00 [INF] Step 2 - ModelState kontrol ediliyor
2025-04-29 11:50:59.898 +03:00 [INF] Step 3 - Transaction başlatılıyor (Read Committed)
2025-04-29 11:50:59.898 +03:00 [INF] Step 4 - Fatura nesnesi oluşturuluyor
2025-04-29 11:50:59.907 +03:00 [INF] Fatura oluşturuldu: ID=7b0f0c65-fdf4-4515-9a0d-b2e922f16673, FaturaNo=FTR-250429-002
2025-04-29 11:50:59.908 +03:00 [INF] Step 5 - Fatura kalemleri işleniyor
2025-04-29 11:50:59.908 +03:00 [INF] Fatura kalemleri işleniyor. Toplam 1 adet kalem var.
2025-04-29 11:50:59.941 +03:00 [INF] Döviz değerleri hesaplandı: USD -> UZS, BirimFiyat: 25 -> 322429,692500
2025-04-29 11:50:59.941 +03:00 [INF] Fatura detayı oluşturuldu: ID=21709300-7b98-411f-894c-9049a0437268, Ürün=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Miktar=20
2025-04-29 11:50:59.941 +03:00 [INF] Stok hareketi oluşturuldu: ID=a94344f8-23ff-451d-83b8-c3bb13032843, Tür=Giriş, Miktar=20
2025-04-29 11:50:59.942 +03:00 [INF] Step 6 - Veritabanı işlemleri başlatılıyor
2025-04-29 11:50:59.969 +03:00 [INF] Ürün stok miktarı güncellendi: UrunID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Eski=0, Yeni=20
2025-04-29 11:51:00.013 +03:00 [INF] Step 7 - Ana kayıtlar veritabanına eklendi
2025-04-29 11:51:00.013 +03:00 [INF] Step 8 - FIFO işlemleri başlatılıyor
2025-04-29 11:51:00.015 +03:00 [INF] StokFifoService.StokGirisiYap başladı: UrunID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Miktar=20, BirimFiyat=25, ParaBirimi=USD
2025-04-29 11:51:00.015 +03:00 [INF] Parametreler normalize edildi: Birim=Adet, ReferansNo=FTR-250429-002, ParaBirimi=USD, DovizKuru=13000
2025-04-29 11:51:00.016 +03:00 [INF] FIFO nesnesi oluşturuldu: StokFifoID=11160e0e-ab5b-40fe-a55a-5875599146a1
2025-04-29 11:51:00.016 +03:00 [INF] USD birim fiyat direkt atandı (para birimi zaten USD): 25 USD
2025-04-29 11:51:00.023 +03:00 [INF] USD -> UZS birim fiyat hesaplandı: 25 * 12897,187700 = 322429,692500 UZS
2025-04-29 11:51:00.028 +03:00 [INF] USD -> TRY birim fiyat hesaplandı: 25 * 38,363900 = 959,097500 TRY
2025-04-29 11:51:00.043 +03:00 [INF] StokFifo kaydı başarıyla oluşturuldu: ID=11160e0e-ab5b-40fe-a55a-5875599146a1, Ürün=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Miktar=20
2025-04-29 11:51:00.043 +03:00 [INF] FIFO giriş kaydı başarıyla oluşturuldu: UrunID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Miktar=20
2025-04-29 11:51:00.044 +03:00 [INF] Step 9 - Cari hareket kaydı oluşturuluyor
2025-04-29 11:51:00.058 +03:00 [INF] Cari hareket kaydı oluşturuldu: ID=09654026-3d76-4cd4-941c-c1f1d25b30be, CariID=d050f27a-3ece-4bad-9c7a-d0a4d3e6b936
2025-04-29 11:51:00.062 +03:00 [INF] Step 11 - Transaction commit edildi, fatura kaydı tamamlandı
2025-04-29 11:54:00.738 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 11:54:00.742 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 11:54:00.746 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 11:54:00.751 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 11:54:00.751 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 11:54:00.757 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 11:54:00.830 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 12:19:31.591 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 12:19:31.903 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 12:19:58.168 +03:00 [INF] Giriş denemesi: admin
2025-04-29 12:19:58.264 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 12:19:58.264 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 12:19:58.264 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 12:19:58.264 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 12:20:06.934 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 12:20:06.956 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 12:20:06.967 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 12:20:06.981 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 12:20:06.997 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 12:20:06.998 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 12:20:07.016 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 12:20:07.194 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 12:20:36.298 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 12:20:48.479 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 12:20:48.480 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 12:20:48.538 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FaturaNotu', table 'MuhasebeStokDB.dbo.Faturalar'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6c46ff4b-ead4-4ff3-8c07-ea9108ee723f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FaturaNotu', table 'MuhasebeStokDB.dbo.Faturalar'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6c46ff4b-ead4-4ff3-8c07-ea9108ee723f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-29 12:20:48.539 +03:00 [ERR] Fatura oluşturulurken hata oluştu. Transaction geri alınıyor.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FaturaNotu', table 'MuhasebeStokDB.dbo.Faturalar'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6c46ff4b-ead4-4ff3-8c07-ea9108ee723f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 413
2025-04-29 12:20:48.546 +03:00 [ERR] Fatura kaydetme işleminde beklenmeyen bir hata oluştu: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FaturaNotu', table 'MuhasebeStokDB.dbo.Faturalar'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6c46ff4b-ead4-4ff3-8c07-ea9108ee723f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 413
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 452
2025-04-29 14:18:01.623 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 14:18:01.930 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 14:18:24.680 +03:00 [INF] Giriş denemesi: admin
2025-04-29 14:18:24.785 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 14:18:24.785 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 14:18:24.785 +03:00 [INF] Yönlendirme adresi: /SistemLog
2025-04-29 14:18:24.785 +03:00 [INF] Admin kullanıcısı /SistemLog adresine yönlendiriliyor
2025-04-29 14:18:47.973 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 14:18:47.995 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 14:18:48.008 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 14:18:48.038 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 14:18:48.056 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 14:18:48.057 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 14:18:48.074 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 14:18:48.258 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 14:19:10.324 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 14:19:16.759 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=21b61f31-075e-43c1-84bf-b60394b5968d, Ad=xyz ürünü, Birim=, KDV=12, Fiyat=0
2025-04-29 14:19:22.340 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 14:19:22.340 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 14:19:22.379 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FaturaNotu', table 'MuhasebeStokDB.dbo.Faturalar'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6af655d2-1aa4-4d16-8258-0bef6fdcea7e
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FaturaNotu', table 'MuhasebeStokDB.dbo.Faturalar'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6af655d2-1aa4-4d16-8258-0bef6fdcea7e
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-29 14:19:22.380 +03:00 [ERR] Fatura oluşturulurken hata oluştu. Transaction geri alınıyor.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FaturaNotu', table 'MuhasebeStokDB.dbo.Faturalar'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6af655d2-1aa4-4d16-8258-0bef6fdcea7e
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 413
2025-04-29 14:19:22.384 +03:00 [ERR] Fatura kaydetme işleminde beklenmeyen bir hata oluştu: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'FaturaNotu', table 'MuhasebeStokDB.dbo.Faturalar'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6af655d2-1aa4-4d16-8258-0bef6fdcea7e
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 413
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 452
2025-04-29 14:49:52.438 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 14:49:52.748 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 14:49:52.921 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address https://127.0.0.1:7118: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-04-29 15:11:10.923 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 15:11:11.233 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 15:11:55.772 +03:00 [INF] Giriş denemesi: admin
2025-04-29 15:11:55.864 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 15:11:55.864 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 15:11:55.864 +03:00 [INF] Yönlendirme adresi: /
2025-04-29 15:11:55.864 +03:00 [INF] Admin kullanıcısı / adresine yönlendiriliyor
2025-04-29 15:11:55.960 +03:00 [INF] Aktif session bulundu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 15:11:55.961 +03:00 [INF] Admin kullanıcısı tespit edildi
2025-04-29 15:11:55.961 +03:00 [INF] Kimlik doğrulanmış kullanıcı: admin
2025-04-29 15:12:11.414 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 15:12:11.431 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 15:12:11.445 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 15:12:11.459 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 15:12:11.476 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 15:12:11.477 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 15:12:11.486 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 15:12:11.657 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 15:12:31.193 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 15:12:39.467 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 15:12:39.467 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 15:12:39.506 +03:00 [INF] Fatura başarıyla kaydedildi. ID: aa1b61cf-a12b-4ed3-ae4f-2f494efff963
2025-04-29 15:12:39.529 +03:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 500), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 50), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = DateTime2), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p14='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p24='?' (DbType = Boolean), @p25='?' (DbType = Guid), @p26='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p28='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='120']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FaturaDetaylari] ([FaturaDetayID], [Aciklama], [AklananMiktar], [AklanmaTamamlandi], [Aktif], [Birim], [BirimFiyat], [BirimFiyatDoviz], [BirimID], [FaturaID], [GuncellemeTarihi], [IndirimOrani], [IndirimTutari], [IndirimTutariDoviz], [KdvOrani], [KdvTutari], [KdvTutariDoviz], [Miktar], [NetTutar], [NetTutarDoviz], [OlusturanKullaniciID], [OlusturmaTarihi], [SatirKdvToplam], [SatirToplam], [Silindi], [SonGuncelleyenKullaniciID], [Tutar], [TutarDoviz], [UrunID])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-04-29 15:12:39.541 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'SatirKdvToplam', table 'MuhasebeStokDB.dbo.FaturaDetaylari'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ae12755-b237-48b5-8a07-7b47514feae5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'SatirKdvToplam', table 'MuhasebeStokDB.dbo.FaturaDetaylari'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ae12755-b237-48b5-8a07-7b47514feae5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-29 15:12:39.542 +03:00 [ERR] Fatura oluşturulurken hata oluştu. Transaction geri alınıyor.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'SatirKdvToplam', table 'MuhasebeStokDB.dbo.FaturaDetaylari'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ae12755-b237-48b5-8a07-7b47514feae5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 419
2025-04-29 15:12:39.551 +03:00 [ERR] Fatura kaydetme işleminde beklenmeyen bir hata oluştu: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'SatirKdvToplam', table 'MuhasebeStokDB.dbo.FaturaDetaylari'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ae12755-b237-48b5-8a07-7b47514feae5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 419
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 452
2025-04-29 15:12:55.314 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 15:12:55.319 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 15:12:55.323 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 15:12:55.326 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 15:12:55.331 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 15:12:55.331 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 15:12:55.335 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 15:12:55.433 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 15:12:57.901 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 15:13:23.836 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 15:13:23.836 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 15:13:23.846 +03:00 [INF] Fatura başarıyla kaydedildi. ID: 2a5aa273-b07d-414e-ad3e-c55e531b0ecb
2025-04-29 15:13:23.851 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 500), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 50), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = DateTime2), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p14='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p15='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p23='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p24='?' (DbType = Boolean), @p25='?' (DbType = Guid), @p26='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p28='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='120']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FaturaDetaylari] ([FaturaDetayID], [Aciklama], [AklananMiktar], [AklanmaTamamlandi], [Aktif], [Birim], [BirimFiyat], [BirimFiyatDoviz], [BirimID], [FaturaID], [GuncellemeTarihi], [IndirimOrani], [IndirimTutari], [IndirimTutariDoviz], [KdvOrani], [KdvTutari], [KdvTutariDoviz], [Miktar], [NetTutar], [NetTutarDoviz], [OlusturanKullaniciID], [OlusturmaTarihi], [SatirKdvToplam], [SatirToplam], [Silindi], [SonGuncelleyenKullaniciID], [Tutar], [TutarDoviz], [UrunID])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-04-29 15:13:23.855 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'SatirKdvToplam', table 'MuhasebeStokDB.dbo.FaturaDetaylari'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:66ceff0d-dace-423a-96ff-6f8bba9759d0
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'SatirKdvToplam', table 'MuhasebeStokDB.dbo.FaturaDetaylari'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:66ceff0d-dace-423a-96ff-6f8bba9759d0
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-29 15:13:23.856 +03:00 [ERR] Fatura oluşturulurken hata oluştu. Transaction geri alınıyor.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'SatirKdvToplam', table 'MuhasebeStokDB.dbo.FaturaDetaylari'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:66ceff0d-dace-423a-96ff-6f8bba9759d0
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 419
2025-04-29 15:13:23.861 +03:00 [ERR] Fatura kaydetme işleminde beklenmeyen bir hata oluştu: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'SatirKdvToplam', table 'MuhasebeStokDB.dbo.FaturaDetaylari'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:66ceff0d-dace-423a-96ff-6f8bba9759d0
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 419
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 452
2025-04-29 15:46:45.158 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 15:46:45.468 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 15:47:44.013 +03:00 [INF] Giriş denemesi: admin
2025-04-29 15:47:44.117 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 15:47:44.118 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 15:47:44.118 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 15:47:44.118 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 15:47:51.015 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 15:47:51.035 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 15:47:51.048 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 15:47:51.062 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 15:47:51.078 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 15:47:51.079 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 15:47:51.097 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 15:47:51.276 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 17:59:13.321 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 17:59:13.624 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 17:59:21.762 +03:00 [INF] Giriş denemesi: admin
2025-04-29 17:59:21.856 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 17:59:21.856 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 17:59:21.856 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 17:59:21.856 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 17:59:28.284 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 17:59:28.306 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 17:59:28.319 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 17:59:28.333 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 17:59:28.348 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 17:59:28.349 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 17:59:28.367 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 17:59:28.555 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 17:59:48.498 +03:00 [INF] Start processing HTTP request GET https://v6.exchangerate-api.com/v6/645b5bebcab7cef56e1b609c/latest/USD
2025-04-29 17:59:48.502 +03:00 [INF] Sending HTTP request GET https://v6.exchangerate-api.com/v6/645b5bebcab7cef56e1b609c/latest/USD
2025-04-29 17:59:48.881 +03:00 [INF] Received HTTP response headers after 376.0968ms - 200
2025-04-29 17:59:48.888 +03:00 [INF] End processing HTTP request after 393.6588ms - 200
2025-04-29 17:59:55.474 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 17:59:55.477 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 17:59:55.480 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 17:59:55.483 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 17:59:55.485 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 17:59:55.485 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 17:59:55.488 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 17:59:55.569 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 18:00:16.658 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 18:00:27.616 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 18:00:27.617 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 18:00:27.647 +03:00 [INF] Fatura başarıyla kaydedildi. ID: ebe5fa78-95be-4f90-97b0-6677f78e4c02
2025-04-29 18:00:27.676 +03:00 [INF] Fatura detayları başarıyla kaydedildi. Detay sayısı: 1
2025-04-29 18:00:27.701 +03:00 [INF] Stok hareketleri başarıyla kaydedildi.
2025-04-29 18:00:27.761 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@__prefix_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='120']
SELECT TOP(1) [i].[IrsaliyeID], [i].[Aciklama], [i].[Aktif], [i].[CariID], [i].[DepoID], [i].[Durum], [i].[FaturaID], [i].[GuncellemeTarihi], [i].[IrsaliyeNumarasi], [i].[IrsaliyeTarihi], [i].[IrsaliyeTuru], [i].[IrsaliyeTuruID], [i].[OlusturanKullaniciId], [i].[OlusturmaTarihi], [i].[Silindi], [i].[SonGuncelleyenKullaniciId]
FROM [Irsaliyeler] AS [i]
WHERE [i].[Silindi] = CAST(0 AS bit) AND [i].[Aktif] = CAST(1 AS bit) AND [i].[IrsaliyeNumarasi] LIKE @__prefix_0_startswith ESCAPE N'\'
ORDER BY [i].[IrsaliyeNumarasi] DESC
2025-04-29 18:00:27.767 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:058ded8d-6712-4ae3-b299-582528a372dc
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:058ded8d-6712-4ae3-b299-582528a372dc
Error Number:207,State:1,Class:16
2025-04-29 18:00:27.768 +03:00 [ERR] Otomatik irsaliye oluşturulurken hata oluştu: Invalid column name 'DepoID'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1494
ClientConnectionId:058ded8d-6712-4ae3-b299-582528a372dc
Error Number:207,State:1,Class:16
2025-04-29 18:00:27.770 +03:00 [ERR] Fatura oluşturulurken hata oluştu. Transaction geri alınıyor.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1494
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 436
ClientConnectionId:058ded8d-6712-4ae3-b299-582528a372dc
Error Number:207,State:1,Class:16
2025-04-29 18:00:27.777 +03:00 [ERR] Fatura kaydetme işleminde beklenmeyen bir hata oluştu: Invalid column name 'DepoID'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1494
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 436
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 454
ClientConnectionId:058ded8d-6712-4ae3-b299-582528a372dc
Error Number:207,State:1,Class:16
2025-04-29 18:04:19.178 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 18:04:19.183 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 18:04:19.186 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 18:04:19.189 +03:00 [INF] Ürün listesi yüklendi, toplam 2 adet ürün bulundu.
2025-04-29 18:04:19.191 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 18:04:19.191 +03:00 [INF] Ürün select list oluşturuldu, toplam 2 adet öğe içeriyor.
2025-04-29 18:04:19.195 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 18:04:19.298 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 18:04:59.412 +03:00 [INF] Giriş denemesi: admin
2025-04-29 18:04:59.472 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 18:04:59.472 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 18:04:59.472 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 18:04:59.472 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 18:15:00.039 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 18:15:00.351 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 18:15:10.647 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 18:15:10.669 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 18:15:10.682 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 18:15:10.711 +03:00 [INF] Ürün listesi yüklendi, toplam 3 adet ürün bulundu.
2025-04-29 18:15:10.725 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 18:15:10.726 +03:00 [INF] Ürün select list oluşturuldu, toplam 3 adet öğe içeriyor.
2025-04-29 18:15:10.744 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 18:15:10.914 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 18:15:29.046 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 18:15:41.720 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 18:15:41.720 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 18:15:41.762 +03:00 [INF] Fatura başarıyla kaydedildi. ID: 5bb07fc9-291d-4b6d-8654-251bf48ab3fa
2025-04-29 18:15:41.794 +03:00 [INF] Fatura detayları başarıyla kaydedildi. Detay sayısı: 1
2025-04-29 18:15:41.815 +03:00 [INF] Stok hareketleri başarıyla kaydedildi.
2025-04-29 18:15:41.857 +03:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@__prefix_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='120']
SELECT TOP(1) [i].[IrsaliyeID], [i].[Aciklama], [i].[Aktif], [i].[CariID], [i].[DepoID], [i].[Durum], [i].[FaturaID], [i].[GuncellemeTarihi], [i].[IrsaliyeNumarasi], [i].[IrsaliyeTarihi], [i].[IrsaliyeTuru], [i].[IrsaliyeTuruID], [i].[OlusturanKullaniciId], [i].[OlusturmaTarihi], [i].[Silindi], [i].[SonGuncelleyenKullaniciId]
FROM [Irsaliyeler] AS [i]
WHERE [i].[Silindi] = CAST(0 AS bit) AND [i].[Aktif] = CAST(1 AS bit) AND [i].[IrsaliyeNumarasi] LIKE @__prefix_0_startswith ESCAPE N'\'
ORDER BY [i].[IrsaliyeNumarasi] DESC
2025-04-29 18:15:41.863 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9dc2f040-2b6a-44ef-a4d5-dc19a86c576a
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9dc2f040-2b6a-44ef-a4d5-dc19a86c576a
Error Number:207,State:1,Class:16
2025-04-29 18:15:41.864 +03:00 [ERR] Otomatik irsaliye oluşturulurken hata oluştu: Invalid column name 'DepoID'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1498
ClientConnectionId:9dc2f040-2b6a-44ef-a4d5-dc19a86c576a
Error Number:207,State:1,Class:16
2025-04-29 18:15:41.866 +03:00 [ERR] Fatura oluşturulurken hata oluştu. Transaction geri alınıyor.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1498
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 436
ClientConnectionId:9dc2f040-2b6a-44ef-a4d5-dc19a86c576a
Error Number:207,State:1,Class:16
2025-04-29 18:15:41.873 +03:00 [ERR] Fatura kaydetme işleminde beklenmeyen bir hata oluştu: Invalid column name 'DepoID'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1498
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 436
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 454
ClientConnectionId:9dc2f040-2b6a-44ef-a4d5-dc19a86c576a
Error Number:207,State:1,Class:16
2025-04-29 18:15:57.047 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 18:15:57.051 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 18:15:57.056 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 18:15:57.060 +03:00 [INF] Ürün listesi yüklendi, toplam 3 adet ürün bulundu.
2025-04-29 18:15:57.065 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 18:15:57.065 +03:00 [INF] Ürün select list oluşturuldu, toplam 3 adet öğe içeriyor.
2025-04-29 18:15:57.071 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 18:15:57.160 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 18:41:16.430 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 18:41:16.737 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 18:41:30.922 +03:00 [INF] Giriş denemesi: admin
2025-04-29 18:41:31.019 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 18:41:31.019 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 18:41:31.019 +03:00 [INF] Yönlendirme adresi: /Fatura
2025-04-29 18:41:31.019 +03:00 [INF] Admin kullanıcısı /Fatura adresine yönlendiriliyor
2025-04-29 18:41:33.965 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 18:41:33.984 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 18:41:33.997 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 18:41:34.027 +03:00 [INF] Ürün listesi yüklendi, toplam 3 adet ürün bulundu.
2025-04-29 18:41:34.041 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 18:41:34.042 +03:00 [INF] Ürün select list oluşturuldu, toplam 3 adet öğe içeriyor.
2025-04-29 18:41:34.063 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 18:41:34.244 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 18:41:52.445 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 18:42:01.727 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 18:42:01.728 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 18:42:01.770 +03:00 [INF] Fatura başarıyla kaydedildi. ID: 497598f7-93a5-4200-8273-9c2778dd39a0
2025-04-29 18:42:01.801 +03:00 [INF] Fatura detayları başarıyla kaydedildi. Detay sayısı: 1
2025-04-29 18:42:01.821 +03:00 [INF] Stok hareketleri başarıyla kaydedildi.
2025-04-29 18:42:01.863 +03:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@__prefix_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='120']
SELECT TOP(1) [i].[IrsaliyeID], [i].[Aciklama], [i].[Aktif], [i].[CariID], [i].[DepoID], [i].[Durum], [i].[FaturaID], [i].[GuncellemeTarihi], [i].[IrsaliyeNumarasi], [i].[IrsaliyeTarihi], [i].[IrsaliyeTuru], [i].[IrsaliyeTuruID], [i].[OlusturanKullaniciId], [i].[OlusturmaTarihi], [i].[Silindi], [i].[SonGuncelleyenKullaniciId]
FROM [Irsaliyeler] AS [i]
WHERE [i].[Silindi] = CAST(0 AS bit) AND [i].[Aktif] = CAST(1 AS bit) AND [i].[IrsaliyeNumarasi] LIKE @__prefix_0_startswith ESCAPE N'\'
ORDER BY [i].[IrsaliyeNumarasi] DESC
2025-04-29 18:42:01.869 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MuhasebeStokWebApp.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b3238c3d-5677-44ac-be17-95250d782c8b
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b3238c3d-5677-44ac-be17-95250d782c8b
Error Number:207,State:1,Class:16
2025-04-29 18:42:01.870 +03:00 [ERR] Otomatik irsaliye oluşturulurken hata oluştu: Invalid column name 'DepoID'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1498
ClientConnectionId:b3238c3d-5677-44ac-be17-95250d782c8b
Error Number:207,State:1,Class:16
2025-04-29 18:42:01.871 +03:00 [ERR] Fatura oluşturulurken hata oluştu. Transaction geri alınıyor.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1498
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 436
ClientConnectionId:b3238c3d-5677-44ac-be17-95250d782c8b
Error Number:207,State:1,Class:16
2025-04-29 18:42:01.877 +03:00 [ERR] Fatura kaydetme işleminde beklenmeyen bir hata oluştu: Invalid column name 'DepoID'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepoID'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MuhasebeStokWebApp.Controllers.FaturaController.OtomatikIrsaliyeOlustur(Fatura fatura, Nullable`1 depoID) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 1498
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 436
   at MuhasebeStokWebApp.Controllers.FaturaController.Create(FaturaCreateViewModel viewModel) in /Users/muhammetkocaman/MuhasebeStokWebApp/Controllers/FaturaController.cs:line 454
ClientConnectionId:b3238c3d-5677-44ac-be17-95250d782c8b
Error Number:207,State:1,Class:16
2025-04-29 21:43:35.353 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 21:43:35.661 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 21:43:42.102 +03:00 [INF] Giriş denemesi: admin
2025-04-29 21:43:42.213 +03:00 [INF] Admin kullanıcısı başarıyla giriş yaptı: admin
2025-04-29 21:43:42.214 +03:00 [INF] Admin session oluşturuldu: UserID=c17d5db6-d0c4-4f97-9c3e-40bc207a9f7d, UserName=admin
2025-04-29 21:43:42.214 +03:00 [INF] Yönlendirme adresi: /Urun
2025-04-29 21:43:42.214 +03:00 [INF] Admin kullanıcısı /Urun adresine yönlendiriliyor
2025-04-29 21:43:48.765 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 21:43:48.781 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 21:43:48.793 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 21:43:48.808 +03:00 [INF] Ürün listesi yüklendi, toplam 3 adet ürün bulundu.
2025-04-29 21:43:48.840 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 21:43:48.841 +03:00 [INF] Ürün select list oluşturuldu, toplam 3 adet öğe içeriyor.
2025-04-29 21:43:48.861 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 21:43:49.070 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 21:44:04.746 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 21:44:07.889 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=abbbf95c-bd6f-4e16-b63e-3219a1c79262, Ad=test ürün, Birim=, KDV=12, Fiyat=0
2025-04-29 21:44:09.699 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 21:44:16.622 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 21:44:16.622 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 21:44:16.662 +03:00 [INF] Fatura başarıyla kaydedildi. ID: 7fc0af72-0d22-43b3-a015-e946db5ae068
2025-04-29 21:44:16.693 +03:00 [INF] Fatura detayları başarıyla kaydedildi. Detay sayısı: 1
2025-04-29 21:44:16.719 +03:00 [INF] Stok hareketleri başarıyla kaydedildi.
2025-04-29 21:44:16.809 +03:00 [INF] Fatura için otomatik irsaliye oluşturuldu: IrsaliyeNo=IRS-250429-001, FaturaNo=FTR-250429-003
2025-04-29 21:44:16.809 +03:00 [INF] Otomatik irsaliye oluşturuldu.
2025-04-29 21:44:16.813 +03:00 [INF] İşlem başarıyla tamamlandı ve commit edildi.
2025-04-29 22:26:11.875 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 22:26:12.198 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 22:26:12.382 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address https://127.0.0.1:7118: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-04-29 22:26:34.624 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 22:26:34.943 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
2025-04-29 22:26:41.586 +03:00 [INF] Birim sayısı: Aktif=1, Pasif=2, Silinmiş=3
2025-04-29 22:26:49.993 +03:00 [INF] Fatura silme işlemi başlatılıyor: FaturaID=7b0f0c65-fdf4-4515-9a0d-b2e922f16673, Kullanıcı=admin
2025-04-29 22:26:50.047 +03:00 [INF] Fatura başarıyla silindi: FaturaID=7b0f0c65-fdf4-4515-9a0d-b2e922f16673, Kullanıcı=admin
2025-04-29 22:26:55.200 +03:00 [INF] Fatura silme işlemi başlatılıyor: FaturaID=7fc0af72-0d22-43b3-a015-e946db5ae068, Kullanıcı=admin
2025-04-29 22:26:55.210 +03:00 [INF] Fatura başarıyla silindi: FaturaID=7fc0af72-0d22-43b3-a015-e946db5ae068, Kullanıcı=admin
2025-04-29 22:27:50.769 +03:00 [INF] Fatura oluşturma sayfası yükleniyor: Kullanıcı=admin
2025-04-29 22:27:50.778 +03:00 [INF] Cari listesi yüklendi, toplam 2 adet cari bulundu.
2025-04-29 22:27:50.789 +03:00 [INF] Sözleşme listesi yüklendi, toplam 0 adet sözleşme bulundu.
2025-04-29 22:27:50.800 +03:00 [INF] Ürün listesi yüklendi, toplam 3 adet ürün bulundu.
2025-04-29 22:27:50.805 +03:00 [INF] Depo listesi yüklendi, toplam 1 adet depo bulundu.
2025-04-29 22:27:50.806 +03:00 [INF] Ürün select list oluşturuldu, toplam 3 adet öğe içeriyor.
2025-04-29 22:27:50.822 +03:00 [INF] Para birimi listesi yüklendi, toplam 3 adet para birimi bulundu.
2025-04-29 22:27:50.992 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 22:28:07.747 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=c06282c1-32b7-4aa5-b7f4-0d33cec3f173, Ad=Alt ayar mili, Birim=, KDV=12, Fiyat=0
2025-04-29 22:28:10.427 +03:00 [INF] Ürün bilgileri döndürülüyor. ID=21b61f31-075e-43c1-84bf-b60394b5968d, Ad=xyz ürünü, Birim=, KDV=12, Fiyat=0
2025-04-29 22:28:16.870 +03:00 [INF] Step 1 - ViewModel alındı
2025-04-29 22:28:16.870 +03:00 [INF] Step 2 - Validasyon kontrolleri geçildi, işlem başlatılıyor
2025-04-29 22:28:16.901 +03:00 [INF] Fatura başarıyla kaydedildi. ID: bb1fed79-70bd-4591-abf8-3a2d63afab11
2025-04-29 22:28:16.934 +03:00 [INF] Fatura detayları başarıyla kaydedildi. Detay sayısı: 1
2025-04-29 22:28:16.942 +03:00 [INF] Stok hareketleri başarıyla kaydedildi.
2025-04-29 22:28:16.944 +03:00 [INF] StokFifoService.StokGirisiYap başladı: UrunID=21b61f31-075e-43c1-84bf-b60394b5968d, Miktar=10, BirimFiyat=100, ParaBirimi=USD
2025-04-29 22:28:16.945 +03:00 [INF] Parametreler normalize edildi: Birim=Adet, ReferansNo=FTR-250429-002, ParaBirimi=USD, DovizKuru=13000
2025-04-29 22:28:16.945 +03:00 [INF] FIFO nesnesi oluşturuldu: StokFifoID=31728e43-2848-4f0e-a4e9-01c7403a36e8
2025-04-29 22:28:16.945 +03:00 [INF] USD birim fiyat direkt atandı (para birimi zaten USD): 100 USD
2025-04-29 22:28:16.971 +03:00 [INF] USD -> UZS birim fiyat hesaplandı: 100 * 12950,959500 = 1295095,950000 UZS
2025-04-29 22:28:16.977 +03:00 [INF] USD -> TRY birim fiyat hesaplandı: 100 * 38,476000 = 3847,600000 TRY
2025-04-29 22:28:17.001 +03:00 [INF] StokFifo kaydı başarıyla oluşturuldu: ID=31728e43-2848-4f0e-a4e9-01c7403a36e8, Ürün=21b61f31-075e-43c1-84bf-b60394b5968d, Miktar=10
2025-04-29 22:28:17.001 +03:00 [INF] FIFO kayıtları başarıyla oluşturuldu.
2025-04-29 22:28:17.085 +03:00 [INF] Fatura için otomatik irsaliye oluşturuldu: IrsaliyeNo=IRS-250429-002, FaturaNo=FTR-250429-002
2025-04-29 22:28:17.085 +03:00 [INF] Otomatik irsaliye oluşturuldu.
2025-04-29 22:28:17.089 +03:00 [INF] İşlem başarıyla tamamlandı ve commit edildi.
2025-04-29 23:30:55.342 +03:00 [INF] Veritabanına bağlantı başarılı. Migrationlar uygulanıyor...
2025-04-29 23:30:55.690 +03:00 [INF] Veritabanı işlemleri başarıyla tamamlandı.
