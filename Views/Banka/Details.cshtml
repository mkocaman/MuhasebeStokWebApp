@model MuhasebeStokWebApp.ViewModels.Banka.BankaViewModel
@{
    ViewData["Title"] = "Banka Detayı";
}

<div class="container-fluid">
    <div class="page-title">
        <div class="row">
            <div class="col-6">
                <h3>Banka Detayı</h3>
            </div>
            <div class="col-6">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/"><i data-feather="home"></i></a></li>
                    <li class="breadcrumb-item"><a asp-controller="Banka" asp-action="Index">Banka</a></li>
                    <li class="breadcrumb-item active">Banka Detayı</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <!-- Banka Bilgileri -->
        <div class="col-xl-4 col-md-12 box-col-12">
            <div class="card">
                <div class="card-header">
                    <h5>Banka Bilgileri</h5>
                    <div class="card-header-right">
                        <a asp-action="Edit" asp-route-id="@Model.BankaID" class="btn btn-primary btn-sm">
                            <i class="fa fa-edit"></i> Düzenle
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <h4 class="f-w-600">@Model.BankaAdi</h4>
                            <span class="@(Model.GuncelBakiye >= 0 ? "badge badge-success" : "badge badge-danger") f-14">
                                Bakiye: @Model.GuncelBakiye.ToString("N2") @Model.ParaBirimi
                            </span>
                            <span class="@(Model.Aktif ? "badge badge-success" : "badge badge-danger") f-14 ml-2">
                                @(Model.Aktif ? "Aktif" : "Pasif")
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-md-12 col-lg-6">
                            <div class="info-group">
                                <h6 class="f-w-600">Şube Adı</h6>
                                <p>@(string.IsNullOrEmpty(Model.SubeAdi) ? "-" : Model.SubeAdi)</p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-12 col-lg-6">
                            <div class="info-group">
                                <h6 class="f-w-600">Şube Kodu</h6>
                                <p>@(string.IsNullOrEmpty(Model.SubeKodu) ? "-" : Model.SubeKodu)</p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-12 col-lg-6">
                            <div class="info-group">
                                <h6 class="f-w-600">Hesap No</h6>
                                <p>@(string.IsNullOrEmpty(Model.HesapNo) ? "-" : Model.HesapNo)</p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-12 col-lg-6">
                            <div class="info-group">
                                <h6 class="f-w-600">IBAN</h6>
                                <p>@(string.IsNullOrEmpty(Model.IBAN) ? "-" : Model.IBAN)</p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-12 col-lg-6">
                            <div class="info-group">
                                <h6 class="f-w-600">Para Birimi</h6>
                                <p>@Model.ParaBirimi</p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-12 col-lg-6">
                            <div class="info-group">
                                <h6 class="f-w-600">Açılış Bakiyesi</h6>
                                <p>@Model.AcilisBakiye.ToString("N2") @Model.ParaBirimi</p>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="info-group">
                                <h6 class="f-w-600">Açıklama</h6>
                                <p>@(string.IsNullOrEmpty(Model.Aciklama) ? "-" : Model.Aciklama)</p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-12 col-lg-6">
                            <div class="info-group">
                                <h6 class="f-w-600">Oluşturma Tarihi</h6>
                                <p>@string.Format("{0:dd.MM.yyyy HH:mm}", Model.OlusturmaTarihi)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Banka Hareketleri -->
        <div class="col-xl-8 col-md-12 box-col-12">
            <div class="card">
                <div class="card-header">
                    <h5>Son Hareketler</h5>
                    <div class="card-header-right">
                        <a asp-action="Hareketler" asp-route-id="@Model.BankaID" class="btn btn-info btn-sm">
                            <i class="fa fa-list"></i> Tüm Hareketler
                        </a>
                        <a asp-action="YeniHareket" class="btn btn-success btn-sm ml-2">
                            <i class="fa fa-plus"></i> Yeni Hareket
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Tarih</th>
                                    <th>İşlem Türü</th>
                                    <th>Açıklama</th>
                                    <th class="text-right">Tutar</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag.SonHareketler != null && ViewBag.SonHareketler.Count > 0)
                                {
                                    @foreach (var hareket in ViewBag.SonHareketler)
                                    {
                                        <tr>
                                            <td>@hareket.Tarih.ToString("dd.MM.yyyy HH:mm")</td>
                                            <td>@hareket.HareketTuru</td>
                                            <td>@hareket.Aciklama</td>
                                            <td class="text-right @(hareket.HareketTuru.Contains("Yatırma") || hareket.HareketTuru.Contains("Alma") ? "text-success" : "text-danger")">
                                                @(hareket.HareketTuru.Contains("Yatırma") || hareket.HareketTuru.Contains("Alma") ? "+" : "-")
                                                @hareket.Tutar.ToString("N2") @Model.ParaBirimi
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td colspan="4" class="text-center">Henüz hareket kaydı bulunmamaktadır.</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 