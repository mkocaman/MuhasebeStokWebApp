@model MuhasebeStokWebApp.ViewModels.ParaBirimi.ParaBirimiIliskiDetayViewModel

<div class="card">
    <div class="card-header">
        <h4 class="card-title">Para Birimi İlişki Detayı</h4>
    </div>
    <div class="card-body">
        @if (Model != null && Model.KaynakParaBirimi != null && Model.HedefParaBirimi != null)
        {
            <div class="row">
                <div class="col-md-6">
                    <h5>Kaynak Para Birimi</h5>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <tr>
                                <th>Kod</th>
                                <td>@Model.KaynakParaBirimi.Kod</td>
                            </tr>
                            <tr>
                                <th>Ad</th>
                                <td>@Model.KaynakParaBirimi.Ad</td>
                            </tr>
                            <tr>
                                <th>Sembol</th>
                                <td>@Model.KaynakParaBirimi.Sembol</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="col-md-6">
                    <h5>Hedef Para Birimi</h5>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <tr>
                                <th>Kod</th>
                                <td>@Model.HedefParaBirimi.Kod</td>
                            </tr>
                            <tr>
                                <th>Ad</th>
                                <td>@Model.HedefParaBirimi.Ad</td>
                            </tr>
                            <tr>
                                <th>Sembol</th>
                                <td>@Model.HedefParaBirimi.Sembol</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <hr />

            @if (!Model.IliskiMevcut)
            {
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i> Bu para birimleri arasında herhangi bir ilişki tanımlanmamış.
                </div>
                <div class="mt-3">
                    <a href="@Url.Action("IliskiEkle", "ParaBirimi", new { id = Model.KaynakParaBirimi.ParaBirimiID })" class="btn btn-success">
                        <i class="fas fa-plus"></i> Yeni İlişki Ekle
                    </a>
                </div>
            }
            else
            {
                <div class="row">
                    @if (Model.DogruIliskiMevcut && Model.DogruIliski != null)
                    {
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="card-title mb-0">@Model.KaynakParaBirimi.Kod → @Model.HedefParaBirimi.Kod İlişkisi</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <tr>
                                                <th>Çarpan</th>
                                                <td>@Model.DogruIliski.Carpan.ToString("N6")</td>
                                            </tr>
                                            <tr>
                                                <th>Oluşturma Tarihi</th>
                                                <td>@Model.DogruIliski.OlusturmaTarihi.ToString("dd.MM.yyyy HH:mm")</td>
                                            </tr>
                                            <tr>
                                                <th>Aktif</th>
                                                <td>
                                                    @if (Model.DogruIliski.Aktif)
                                                    {
                                                        <span class="badge bg-success">Aktif</span>
                                                    }
                                                    else
                                                    {
                                                        <span class="badge bg-danger">Pasif</span>
                                                    }
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="mt-3">
                                        <a href="@Url.Action("IliskiDuzenle", "ParaBirimi", new { id = Model.DogruIliski.ParaBirimiIliskiID })" class="btn btn-sm btn-warning">
                                            <i class="fas fa-edit"></i> Düzenle
                                        </a>
                                        <form method="post" action="@Url.Action("IliskiSil", "ParaBirimi")" style="display: inline;">
                                            <input type="hidden" name="id" value="@Model.DogruIliski.ParaBirimiIliskiID" />
                                            <input type="hidden" name="paraBirimiId" value="@Model.KaynakParaBirimi.ParaBirimiID" />
                                            @Html.AntiForgeryToken()
                                            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Bu ilişkiyi silmek istediğinize emin misiniz?');">
                                                <i class="fas fa-trash"></i> Sil
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }

                    @if (Model.TersIliskiMevcut && Model.TersIliski != null)
                    {
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-secondary text-white">
                                    <h5 class="card-title mb-0">@Model.HedefParaBirimi.Kod → @Model.KaynakParaBirimi.Kod İlişkisi</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <tr>
                                                <th>Çarpan</th>
                                                <td>@Model.TersIliski.Carpan.ToString("N6")</td>
                                            </tr>
                                            <tr>
                                                <th>Oluşturma Tarihi</th>
                                                <td>@Model.TersIliski.OlusturmaTarihi.ToString("dd.MM.yyyy HH:mm")</td>
                                            </tr>
                                            <tr>
                                                <th>Aktif</th>
                                                <td>
                                                    @if (Model.TersIliski.Aktif)
                                                    {
                                                        <span class="badge bg-success">Aktif</span>
                                                    }
                                                    else
                                                    {
                                                        <span class="badge bg-danger">Pasif</span>
                                                    }
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="mt-3">
                                        <a href="@Url.Action("IliskiDuzenle", "ParaBirimi", new { id = Model.TersIliski.ParaBirimiIliskiID })" class="btn btn-sm btn-warning">
                                            <i class="fas fa-edit"></i> Düzenle
                                        </a>
                                        <form method="post" action="@Url.Action("IliskiSil", "ParaBirimi")" style="display: inline;">
                                            <input type="hidden" name="id" value="@Model.TersIliski.ParaBirimiIliskiID" />
                                            <input type="hidden" name="paraBirimiId" value="@Model.HedefParaBirimi.ParaBirimiID" />
                                            @Html.AntiForgeryToken()
                                            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Bu ilişkiyi silmek istediğinize emin misiniz?');">
                                                <i class="fas fa-trash"></i> Sil
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>

                @if (!Model.CiftYonluIliskiMevcut)
                {
                    <div class="mt-3">
                        @if (!Model.DogruIliskiMevcut)
                        {
                            <a href="@Url.Action("IliskiEkle", "ParaBirimi", new { id = Model.KaynakParaBirimi.ParaBirimiID })" class="btn btn-success">
                                <i class="fas fa-plus"></i> @Model.KaynakParaBirimi.Kod → @Model.HedefParaBirimi.Kod İlişkisi Ekle
                            </a>
                        }
                        @if (!Model.TersIliskiMevcut)
                        {
                            <a href="@Url.Action("IliskiEkle", "ParaBirimi", new { id = Model.HedefParaBirimi.ParaBirimiID })" class="btn btn-success">
                                <i class="fas fa-plus"></i> @Model.HedefParaBirimi.Kod → @Model.KaynakParaBirimi.Kod İlişkisi Ekle
                            </a>
                        }
                    </div>
                }
            }
        }
        else
        {
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-circle"></i> Para birimleri bilgileri yüklenemedi.
            </div>
        }
    </div>
</div> 